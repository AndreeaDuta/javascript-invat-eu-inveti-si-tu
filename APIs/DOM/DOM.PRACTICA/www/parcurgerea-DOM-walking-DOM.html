<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Parcurgerea unui fragment din DOM</title>
  </head>
  <body>
    <section id="section">
      <h1>Hei, cineva lucrează aici!</h1>
      <div id="fragment" class="speciale">
        <p id="textPara">
          Acesta este un nod de text într-un paragraf. Aici mai este un <span>span</span>
        </p>
        <a href="#">Acesta este un link</a>
        <table>
          <th>
            <tr>
              <td>ceva</td>
              <td>altceva</td>
            </tr>
          </th>
          <tbody>
            <tr>
              <td>0 <span>(zero)</span></td>
              <td>1 <span>(unu)</span></td>
            </tr>
          </tbody>
        </table>
      </div>
      <script type="text/javascript">

        /* VARIANTA CU RECURSIVITATE - while*/
        // function parcurgDOM(element, aplic){
        //   aplic(element);
        //   element = element.firstElementChild;
        //   while(element){ // traversarea recursivă a nodurilor
        //     parcurgDOM(element, aplic);
        //     element = element.nextElementSibling;
        //   };
        // };
        //
        // const elementDOM = document.getElementById("fragment");
        //
        // parcurgDOM(elementDOM, function(element){
        //   console.log(element);
        // });

        /* VARIANTA CU GENERATORS */
        // function* parcurgDOM(element){
        //   yield element;
        //   element = element.firstElementChild;
        //   while(element){
        //     yield* parcurgDOM(element);
        //     element = element.nextElementSibling;
        //   };
        // };
        // const elementDOM = document.getElementById("fragment");
        // for(let element of parcurgDOM(elementDOM)){
        //   console.log(element);
        // };

        /* VARIANTĂ CU RECURSIVITATE - for */
        const elementDOM = document.getElementById("textPara");

        function parcurgeDOM(nodParinte, callback){
          // setează contextul corect
          callback.call(nodParinte);
          // testează dacă „cârligul” are noduri copii
          if(nodParinte.hasChildNodes()){
            for(var nodIntern = nodParinte.firstChild; nodParinte; nodParinte = nodParinte.nextSibling){
              parcurgeDOM(nodIntern, callback);
            };
          };
        };

        // operaționalizarea utilitarului parcurgeDOM
        function afiseazaContinut () {
          if (this.textContent) {
            console.log(this.textContent);
          };
        }

        onload = function () {
          parcurgeDOM(elementDOM, afiseazaContinut);
        };
      </script>
    </section>
  </body>
</html>
